"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[7319],{7319:(e,s,n)=>{n.r(s),n.d(s,{default:()=>I});var a=n(2019),t=n(6399),r=n(7692),l=n(7490),i=n(7021),c=n(647),d=n(9073),o=n(7419),u=n(1645),x=n(5444),m=n(6119),h=n(6708),j=n(5043),A=n(3245);var p=n(9748),y=n(3913),g=n(4040),v=n(3003),b=n(579);const k=function(e){const[s]=p.A.useForm(),{visible:n,hideModal:t,loadData:r}=e,{tenementData:l}=(0,v.d4)((e=>e.tenementSlice));return(0,j.useEffect)((()=>{s.setFieldsValue(l)}),[n]),(0,b.jsx)(y.A,{title:"\u7f16\u8f91\u697c\u5b87",open:n,width:800,onCancel:t,onOk:()=>{s.validateFields().then((async e=>{const{data:s}=await function(e){return(0,A.b)("/editTenement",e)}(e);a.Ay.success(s),t(),r()})).catch((e=>{console.log(e)}))},children:(0,b.jsxs)(p.A,{form:s,children:[(0,b.jsxs)(o.A,{gutter:16,children:[(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u697c\u5b87\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u697c\u5b87\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u8d1f\u8d23\u4eba",name:"person",rules:[{required:!0,message:"\u8d1f\u8d23\u4eba\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsx)(x.A,{})})})]}),(0,b.jsxs)(o.A,{gutter:16,children:[(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u8d1f\u8d23\u4eba\u7535\u8bdd",name:"tel",rules:[{required:!0,message:"\u8d1f\u8d23\u4eba\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u4f7f\u7528\u72b6\u6001",name:"status",rules:[{required:!0,message:"\u8d1f\u8d23\u4eba\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsxs)(g.Ay.Group,{children:[(0,b.jsx)(g.Ay,{value:"1",children:"\u5efa\u8bbe\u4e2d"}),(0,b.jsx)(g.Ay,{value:"2",children:"\u5df2\u7ae3\u5de5"}),(0,b.jsx)(g.Ay,{value:"3",children:"\u4f7f\u7528\u4e2d"})]})})})]}),(0,b.jsxs)(o.A,{gutter:16,children:[(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u7a7a\u7f6e\u7387",name:"vacancyRate",rules:[{required:!0,message:"\u7a7a\u7f6e\u7387\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(p.A.Item,{label:"\u7269\u4e1a\u8d39\u7387",name:"propertyFee",rules:[{required:!0,message:"\u7269\u4e1a\u8d39\u7387\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,b.jsx)(x.A,{})})})]})]})})};var f=n(1599);const I=function(){const[e,s]=(0,j.useState)([]),[n,p]=(0,j.useState)(1),[y,g]=(0,j.useState)(10),[I,S]=(0,j.useState)(0),[w,C]=(0,j.useState)({bulidingName:"",person:""}),[N,F]=(0,j.useState)(!1),[q,T]=(0,j.useState)(!1),z=(0,v.wA)();(0,j.useEffect)((()=>{D()}),[n,y]);const D=async()=>{F(!0);const{data:{list:e,total:a}}=await(t={...w,page:n,pageSize:y},(0,A.b)("/tenementList",t));var t;F(!1),s(e),S(a)},R=async e=>{const{data:s}=await function(e){return(0,A.b)("/deleteTenement",{id:e})}(e);a.Ay.success(s),D()},E=e=>{const{name:s,value:n}=e.target;C((e=>({...e,[s]:n})))},M=[{title:"No.",key:"index",render:(e,s,n)=>n+1},{title:"\u697c\u5b87\u540d\u79f0",key:"name",dataIndex:"name"},{title:"\u8d1f\u8d23\u4eba",key:"person",dataIndex:"person"},{title:"\u8d1f\u8d23\u4eba\u7535\u8bdd",key:" tel",dataIndex:"tel"},{title:"\u4f7f\u7528\u72b6\u6001",key:"status",dataIndex:"status",render:e=>"1"==e?(0,b.jsx)(t.A,{color:"#f50",children:"\u5efa\u8bbe\u4e2d"}):"2"==e?(0,b.jsx)(t.A,{color:"#2db7f5",children:"\u5df2\u7ae3\u5de5"}):"3"==e?(0,b.jsx)(t.A,{color:"#87d068",children:"\u4f7f\u7528\u4e2d"}):void 0},{title:"\u7a7a\u7f6e\u7387",key:"vacancyRate",dataIndex:"vacancyRate",render:e=>(0,b.jsx)(r.A,{percent:e,status:"active"})},{title:"\u7269\u4e1a\u8d39\u7387",key:" propertyFee",dataIndex:"propertyFee",render:e=>(0,b.jsx)(l.A,{color:"green",text:e})},{title:"\u64cd\u4f5c",key:"operate",render:(e,s,n)=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Ay,{type:"primary",onClick:()=>(e=>{T(!0),z((0,f.nB)(e))})(s),children:"\u7f16\u8f91"}),(0,b.jsx)(c.A,{title:"\u5220\u9664",description:"\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u662f",cancelText:"\u5426",onConfirm:()=>R(s.id),children:(0,b.jsx)(i.Ay,{type:"primary",danger:!0,className:"ml",children:"\u5220\u9664"})})]})}];return(0,b.jsxs)("div",{className:"tenement",children:[(0,b.jsx)(k,{visible:q,hideModal:()=>{T(!1)},loadData:D}),(0,b.jsx)(d.A,{className:"search",children:(0,b.jsxs)(o.A,{gutter:16,children:[(0,b.jsxs)(u.A,{span:6,children:[(0,b.jsx)("p",{children:"\u697c\u5b87\u7ba1\u7406\uff1a"}),(0,b.jsx)(x.A,{name:"bulidingName",value:w.bulidingName,onChange:E})]}),(0,b.jsxs)(u.A,{span:6,children:[(0,b.jsx)("p",{children:"\u8d1f\u8d23\u4eba\uff1a"}),(0,b.jsx)(x.A,{name:"person",value:w.person,onChange:E})]}),(0,b.jsxs)(u.A,{span:4,children:[(0,b.jsx)(i.Ay,{type:"primary",onClick:D,children:"\u67e5\u8be2"}),(0,b.jsx)(i.Ay,{type:"primary",danger:!0,className:"ml",onClick:()=>{C({bulidingName:"",person:""}),p(1),g(10),D()},children:"\u91cd\u5236"})]})]})}),(0,b.jsxs)(d.A,{className:"mt",children:[(0,b.jsx)(m.A,{columns:M,dataSource:e,rowKey:e=>e.id,loading:N,pagination:!1}),(0,b.jsx)(h.A,{className:"fr mt",total:I,current:n,pageSize:y,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`\u5171 ${e} \u6761`,onChange:(e,s)=>{p(e),g(s),D()}})]})]})}}}]);
//# sourceMappingURL=7319.3aa39793.chunk.js.map