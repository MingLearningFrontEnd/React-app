{"version":3,"file":"static/js/5488.8414a9a8.chunk.js","mappings":"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","sources":["pages/estate/car/car.tsx","api/car.ts"],"sourcesContent":["import { Card, Row, Col, Table, Input, Button, Tabs, Image, Pagination, Popconfirm, message } from 'antd'\nimport type { TabsProps, TableProps } from 'antd';\nimport come from '../../../assets/come.jpg'\nimport { getCarCharge, getCarData, deleteCar } from '../../../api/car';\nimport { useEffect, useState } from 'react';\nimport type { PaginationProps } from 'antd'\n\n\n\n\ninterface DataType { //充电记录的数据类型\n    key: string;\n    orderNo: string;\n    date: string;\n    carNo: string;\n    type: string;\n    startDate: string;\n    time: string;\n    count: string;\n    cost: string;\n}\ninterface DataType2 {//园内车辆管理数据类型\n    id: string,\n    key: string;\n    carNo: string;\n    name: string;\n    tel: string;\n    type: string;\n    rest: string;\n    time: string;\n    pic: string;\n}\n\n\n\n\nfunction Car() {\n    const [chargeData, setChargeData] = useState<DataType[]>([])\n    const [carData, setCarData] = useState<DataType2[]>([])\n    const [carPlate, setCarPlate] = useState<string>('')\n    const [page, setPage] = useState<number>(1) //页码的数据\n    const [pageSize, setPagesize] = useState<number>(10)//一页多少条数据\n    const [total, setTotal] = useState<number>(0)\n    const [loading, setLoading] = useState<boolean>(false)\n    const [isChargeData, setIsChargeData] = useState<boolean>()\n\n\n\n\n\n    useEffect(() => { //挂载数据\n        loadChargeData()\n        loadCarData()\n    }, [page, pageSize])\n\n    const loadChargeData = async () => { //加载充电记录列表数据\n        setLoading(true)\n        const { data: { list, total } } = await getCarCharge({ page, pageSize, carPlate })\n        setLoading(false)\n        setChargeData(list)\n        setTotal(total)\n        setIsChargeData(true)\n    }\n\n    const loadCarData = async () => { //加载充电记录列表数据\n        setLoading(true)\n        const { data: { list, total } } = await getCarData({ page, pageSize, carPlate })\n        setLoading(false)\n        setCarData(list)\n        setTotal(total)\n        setIsChargeData(false)\n    }\n\n\n    const onChange: PaginationProps['onChange'] = (page, pageSize) => {//页码onchange事件\n        setPage(page)\n        setPagesize(pageSize)\n        loadChargeData()\n    }\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => { //input值\n        setCarPlate(e.target.value)\n    }\n\n    const handleClick = () => {//查询按钮\n        if (isChargeData) {\n            console.log('充电记录', loadChargeData())\n        } else {\n            console.log('园内车辆', loadCarData())\n        }\n    }\n\n    const confirm = async (id: string) => { //删除事件\n        const { data } = await deleteCar(id)\n        message.success(data) //提示操作成功\n        loadCarData()\n    }\n\n\n\n\n    const columns: TableProps<DataType>['columns'] = [ //充电记录表头\n        {\n            title: \"No.\",\n            key: \"index\",\n            render: (text, record, index) => index + 1,\n        },\n        {\n            title: '订单编号',\n            dataIndex: 'orderNo',\n            key: 'orderNo',\n\n        },\n        {\n            title: '订单日期',\n            dataIndex: 'date',\n            key: 'date',\n        },\n        {\n            title: '车牌号码',\n            dataIndex: 'carNo',\n            key: 'carNo',\n        },\n        {\n            title: '车辆类型',\n            dataIndex: 'type',\n            key: 'type',\n\n        },\n        {\n            title: '充电开始时间',\n            dataIndex: 'startDate',\n            key: 'startDate',\n        },\n        {\n            title: '充电时长',\n            dataIndex: 'time',\n            key: 'time',\n        },\n        {\n            title: '充电量',\n            dataIndex: 'count',\n            key: 'count',\n        },\n        {\n            title: '充电费用',\n            dataIndex: 'cost',\n            key: 'cost',\n        },\n    ];\n\n    const columns2: TableProps<DataType2>['columns'] = [ //园内车辆管理表头\n        {\n            title: \"No.\",\n            key: \"index\",\n            render: (text, record, index) => index + 1,\n        },\n        {\n            title: '车牌号',\n            dataIndex: 'carNo',\n            key: 'carNo',\n\n        },\n        {\n            title: '车主姓名',\n            dataIndex: 'name',\n            key: 'name',\n        },\n        {\n            title: '车主电话',\n            dataIndex: 'tel',\n            key: 'tel',\n        },\n        {\n            title: '租赁类型',\n            dataIndex: 'type',\n            key: 'type',\n\n        },\n        {\n            title: '租期剩余',\n            dataIndex: 'rest',\n            key: 'rest',\n        },\n        {\n            title: '超期天数',\n            dataIndex: 'time',\n            key: 'time',\n        },\n        {\n            title: '入场照片',\n            dataIndex: 'pic',\n            key: 'pic',\n            render: (value) => <Image\n                src={come}\n                width={50}\n                placeholder={\n                    <Image\n                        preview={false}\n                        src={come}\n                        width={150}\n                    />\n                }\n            />\n        },\n\n        {\n            title: '操作',\n            dataIndex: 'operate',\n            key: 'operate',\n            render: (value, record, index) => {\n                return <>\n                    <Popconfirm\n                        title='删除'\n                        description=\"确认删除？\"\n                        okText='是'\n                        cancelText='否'\n                        onConfirm={() => confirm(record.id)} //将选中的一行的id传入\n                    >\n                        <Button type=\"primary\" size=\"small\" danger >删除</Button>\n                    </Popconfirm>\n\n                </>\n            }\n        },\n\n    ];\n\n    const items: TabsProps['items'] = [\n        {\n            key: '1',\n            label: '充电记录',\n            children: <>\n                <Table\n                    columns={columns}\n                    dataSource={chargeData}\n                    loading={loading}\n                    pagination={false}\n                    rowKey={record => record.orderNo}\n                />\n                <Pagination\n                    className='fr mt'\n                    showQuickJumper\n                    showSizeChanger\n                    current={page}\n                    pageSize={pageSize}\n                    total={total}\n                    onChange={onChange}\n                />\n            </>\n        },\n        {\n            key: '2',\n            label: '园内车辆列表',\n            children: <>\n                <Table columns={columns2}\n                    dataSource={carData}\n                    loading={loading}\n                    pagination={false}\n                    rowKey={record => record.name}\n\n                />\n                <Pagination\n                    className='fr mt'\n                    showQuickJumper\n                    showSizeChanger\n                    current={page}\n                    pageSize={pageSize}\n                    total={total}\n                    onChange={onChange}\n                />\n            </>,\n        },\n    ];\n    return (\n        <div className='car'>\n            <Card>\n                <Row>\n                    <Col span={8}>\n                        <Input placeholder='请输入车牌号' name='carPlate' value={carPlate} onChange={handleChange} />\n                    </Col>\n                    <Col span={8}>\n                        <Button type='primary' className='ml' onClick={handleClick}>查询</Button>\n                    </Col>\n                </Row>\n            </Card>\n\n            <Card>\n                <Tabs\n                    items={items}\n                >\n                </Tabs>\n            </Card>\n        </div>\n    )\n}\n\nexport default Car","import { post } from \"../utils/http/request\";\n\ninterface SearchType{ //\n    page:number,\n    pageSize:number,\n    carPlate?:string,\n}\n\n\nexport function getCarCharge(data:SearchType){ //获取充电记录列表\n    return post('/car1',data)\n} \n\nexport function getCarData(data:SearchType){ //园内车辆列表\n    return post('/car2',data)\n}\n\n\nexport function deleteCar(id:string){ //删除园内车辆\n    return post('/deleteCar',{id})\n}\n\n"],"names":["chargeData","setChargeData","useState","carData","setCarData","carPlate","setCarPlate","page","setPage","pageSize","setPagesize","total","setTotal","loading","setLoading","isChargeData","setIsChargeData","useEffect","loadChargeData","loadCarData","async","data","list","post","onChange","confirm","id","deleteCar","message","success","columns2","title","key","render","text","record","index","dataIndex","value","_jsx","Image","src","come","width","placeholder","preview","_Fragment","children","Popconfirm","description","okText","cancelText","onConfirm","Button","type","size","danger","items","label","_jsxs","Table","columns","dataSource","pagination","rowKey","orderNo","Pagination","className","showQuickJumper","showSizeChanger","current","name","Card","Row","Col","span","Input","e","target","onClick","handleClick","console","log","Tabs"],"sourceRoot":""}