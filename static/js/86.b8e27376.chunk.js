"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[86],{6606:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5043);const n=function(e,t){const[a,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(1),[r,c]=(0,s.useState)(10),[o,d]=(0,s.useState)(0),[h,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(e),x=async()=>{u(!0);try{const{data:{list:e,total:a}}=await t({page:l,pageSize:r,...m});n(e),d(a)}catch(e){console.log(e)}finally{u(!1)}};return(0,s.useEffect)((()=>{x()}),[l,r,t]),{dataList:a,page:l,pageSize:r,loading:h,total:o,formData:m,setDataList:n,setPage:i,setPagesize:c,setTotal:d,setLoading:u,setFormData:p,loadData:x,onChange:(e,t)=>{i(e),c(t)},handleChange:e=>{const{name:t,value:a}=e.target;p((e=>({...e,[t]:a})))},reset:()=>{i(1),c(10),p(e)}}}},86:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(7021),n=a(647),l=a(9073),i=a(7419),r=a(1645),c=a(5444),o=a(147),d=a(6119),h=a(6708),u=a(930),m=a(6606),p=a(5043),x=a(3003),y=a(579);const A=function(e,t){return function(a){return function(s){return t.every((t=>e.includes(t)))?(0,y.jsx)(a,{...s}):null}}};var g=a(9748),j=a(2019),k=a(3913),f=a(3245);const S=function(e){const{visible:t,hideModal:a,loadData:s}=e,[n]=g.A.useForm();return(0,y.jsx)(k.A,{title:"\u65b0\u589e\u8d26\u53f7",open:t,onCancel:a,width:800,onOk:()=>{n.validateFields().then((async e=>{const{data:t}=await(0,f.b)("/addAcount");j.Ay.success(t),a(),s()})).catch((e=>{console.log(e)}))},children:(0,y.jsxs)(g.A,{form:n,children:[(0,y.jsxs)(i.A,{gutter:16,children:[(0,y.jsx)(r.A,{span:12,children:(0,y.jsx)(g.A.Item,{label:"\u8d26\u53f7\u540d\u79f0",name:"accountName",rules:[{required:!0,message:"\u8d26\u53f7\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,y.jsx)(c.A,{})})}),(0,y.jsx)(r.A,{span:12,children:(0,y.jsx)(g.A.Item,{label:"\u6240\u5c5e\u6743\u9650",name:"auth",rules:[{required:!0,message:"\u6240\u5c5e\u6743\u9650\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,y.jsx)(c.A,{})})})]}),(0,y.jsxs)(i.A,{gutter:16,children:[(0,y.jsx)(r.A,{span:12,children:(0,y.jsx)(g.A.Item,{label:"\u4f7f\u7528\u4eba",name:"person",rules:[{required:!0,message:"\u4f7f\u7528\u4eba\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,y.jsx)(c.A,{})})}),(0,y.jsx)(r.A,{span:12,children:(0,y.jsx)(g.A.Item,{label:"\u4f7f\u7528\u4eba\u7535\u8bdd",name:"tel",rules:[{required:!0,message:"\u4f7f\u7528\u4eba\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,y.jsx)(c.A,{})})})]}),(0,y.jsx)(i.A,{gutter:16,children:(0,y.jsx)(r.A,{span:12,children:(0,y.jsx)(g.A.Item,{label:"\u6240\u5c5e\u90e8\u95e8",name:"department",rules:[{required:!0,message:"\u6240\u5c5e\u90e8\u95e8\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,y.jsx)(c.A,{})})})})]})})},N=[{title:"\u5de5\u4f5c\u53f0",key:"/dashboard"},{title:"\u79df\u6237\u7ba1\u7406",key:"/users"},{title:"\u7269\u4e1a\u7ba1\u7406",key:"/estate",children:[{title:"\u697c\u5b87\u7ba1\u7406",key:"/estate/tenement"},{title:"\u623f\u95f4\u7ba1\u7406",key:"/estate/room"},{title:"\u8f66\u8f86\u4fe1\u606f",key:"/estate/car"}]},{title:"\u62a5\u4fee\u7ba1\u7406",key:"/repair"},{title:"\u8d22\u52a1\u7ba1\u7406",key:"/finance",children:[{title:"\u5408\u540c\u7ba1\u7406",key:"/finance/contract"},{title:"\u8d26\u5355\u7ba1\u7406",key:"/finance/bill"}]},{title:"\u62db\u5546\u7ba1\u7406",key:"/merchants"},{title:"\u8fd0\u8425\u7ba1\u7406",key:"/operation",children:[{title:"\u8fd0\u8425\u603b\u89c8",key:"/operation/all"},{title:"\u6587\u7ae0\u53d1\u5e03",key:"/operation/article"},{title:"\u5185\u5bb9\u8bc4\u8bba",key:"/operation/comments"}]},{title:"\u8bbe\u5907\u7ba1\u7406",key:"/equipment"},{title:"\u80fd\u6e90\u6d88\u8017",key:"/energy"},{title:"\u7cfb\u7edf\u8bbe\u7f6e",key:"/settings"},{title:"\u4e2a\u4eba\u4e2d\u5fc3",key:"/personal"}];function C(e){let t=[];return e.forEach((e=>{if(e.children&&e.children.length>0){const a=C(e.children);t=t.concat(a)}else t.push(e.key)})),t}const b=function(){const[e,t]=(0,p.useState)([]),{menuList:a}=(0,x.d4)((e=>e.authSlice)),[g,j]=(0,p.useState)("\u5f53\u524d\u7528\u6237"),[k,f]=(0,p.useState)(!1);(0,p.useEffect)((()=>{t(C(a))}),[]);const{dataList:b,page:D,pageSize:I,loading:v,total:w,formData:z,setDataList:L,setPage:T,setPagesize:q,setTotal:F,setLoading:P,setFormData:E,loadData:J,onChange:K,handleChange:M,reset:O}=(0,m.A)({accountName:""},u.aN),$=A(JSON.parse(sessionStorage.getItem("btnAuth")),["delete"])(s.Ay),_=[{title:"No.",key:"index",render:(e,t,a)=>a+1},{title:"\u8d26\u53f7\u540d\u79f0",dataIndex:"accountName",key:"accountName"},{title:"\u6240\u5c5e\u6743\u9650",dataIndex:"auth",key:"auth"},{title:"\u4f7f\u7528\u4eba",dataIndex:"person",key:"person"},{title:"\u4f7f\u7528\u4eba\u7535\u8bdd",dataIndex:"tel",key:"tel"},{title:"\u6240\u5c5e\u90e8\u95e8",dataIndex:"department",key:"department"},{title:"\u64cd\u4f5c",key:"operate",render:(e,a)=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Ay,{size:"small",type:"primary",onClick:()=>((e,a)=>{j(a);const s=C(e);t(s)})(a.menu,a.accountName),children:"\u4fee\u6539\u6743\u9650"}),(0,y.jsx)(n.A,{title:"\u64cd\u4f5c\u63d0\u793a",description:"\u786e\u8ba4\u8981\u5220\u9664\u5f53\u524d\u8d26\u53f7\u5417\uff1f",okText:"\u662f",cancelText:"\u5426",children:(0,y.jsx)($,{size:"small",type:"primary",danger:!0,className:"ml",children:"\u5220\u9664\u8d26\u53f7"})})]})}];return(0,y.jsxs)("div",{className:"settings",children:[(0,y.jsx)(S,{visible:k,hideModal:()=>{f(!1)},loadData:J}),(0,y.jsx)(l.A,{children:(0,y.jsxs)(i.A,{gutter:16,children:[(0,y.jsx)(r.A,{span:8,children:(0,y.jsx)(c.A,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u6237\u540d",value:z.accountName,name:"accountName",onChange:M})}),(0,y.jsx)(r.A,{span:8,children:(0,y.jsx)(s.Ay,{type:"primary",onClick:J,children:"\u67e5\u8be2"})}),(0,y.jsx)(r.A,{span:8,className:"tr",children:(0,y.jsx)(s.Ay,{type:"primary",onClick:()=>{f(!0)},children:"\u65b0\u589e\u8d26\u53f7"})})]})}),(0,y.jsxs)(i.A,{gutter:16,className:"mt",children:[(0,y.jsxs)(r.A,{span:8,children:[(0,y.jsx)(l.A,{title:g+":\u6240\u62e5\u6743\u9650",children:(0,y.jsx)(o.A,{checkable:!0,treeData:N,checkedKeys:e,onCheck:e=>{t(e)}})}),(0,y.jsx)(l.A,{className:"mt",children:(0,y.jsxs)(n.A,{title:"\u64cd\u4f5c\u63d0\u793a",okText:"\u662f",cancelText:"\u5426",description:`\u60a8\u786e\u8ba4\u8981\u4fee\u6539${g}\u7528\u6237\u7684\u6743\u9650\u5417\uff1f`,onConfirm:()=>{console.log(e,g)},children:["   ",(0,y.jsx)(s.Ay,{type:"primary",children:"\u63d0\u4ea4\u4fee\u6539"})]})})]}),(0,y.jsx)(r.A,{span:16,children:(0,y.jsxs)(l.A,{children:[(0,y.jsx)(d.A,{dataSource:b,columns:_,pagination:!1,loading:v,rowKey:e=>e.id}),(0,y.jsx)(h.A,{className:"fr mt",showQuickJumper:!0,showSizeChanger:!0,total:w,current:D,pageSize:I,showTotal:e=>`\u5171${e}\u6761`,onChange:K})]})})]})]})}}}]);
//# sourceMappingURL=86.b8e27376.chunk.js.map